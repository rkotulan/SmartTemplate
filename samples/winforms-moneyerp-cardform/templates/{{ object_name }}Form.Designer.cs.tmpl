{{~
  # Maps control_prefix → WinForms control class
  func ctrl_class(prefix)
    if prefix == "tb"
      ret "System.Windows.Forms.TextBox"
    else if prefix == "nud"
      ret "System.Windows.Forms.NumericUpDown"
    else if prefix == "ce"
      ret "CSW.CSWSystemUI.CurrencyEdit"
    else if prefix == "chb"
      ret "System.Windows.Forms.CheckBox"
    else if prefix == "ndtp"
      ret "System.Windows.Forms.DateTimePicker"
    else if prefix == "cb"
      ret "System.Windows.Forms.ComboBox"
    else if prefix == "gpbe"
      ret "CSW.Controls.GroupPickButtonEdit"
    else
      ret "CSW.Controls.PickButtonEdit"
    end
  end

  # Returns true for prefixes that implement ISupportInitialize
  func needs_init(prefix)
    ret prefix == "pbe" || prefix == "gpbe" || prefix == "nud"
  end

  # Tries to parse a priority number from Description (first space-separated token).
  # Returns null when Description is empty or not numeric.
  func parse_priority(desc)
    if desc == null
      ret null
    end
    $t = desc | string.strip
    if (string.size $t) == 0
      ret null
    end
    ret ($t | string.split " ")[0] | string.to_int
  end

  # Collect all visible properties (top-level + groups), separate Poznamka
  $vp_all   = []
  $poznamka = null
  for prop in properties
    if prop.control_prefix
      if prop.name == "Poznamka"
        $poznamka = prop
      else
        $vp_all = $vp_all | array.add prop
      end
    end
  end
  for group in property_groups
    for prop in group.properties
      if prop.control_prefix
        $vp_all = $vp_all | array.add prop
      end
    end
  end

  # Split into numbered (have priority in Description) and the rest
  $vp_num   = []
  $vp_alpha = []
  for prop in $vp_all
    if (parse_priority prop.description) != null
      $vp_num   = $vp_num   | array.add prop
    else
      $vp_alpha = $vp_alpha | array.add prop
    end
  end

  # Insertion-sort $vp_num by priority (ascending)
  $sorted_num = []
  for prop in $vp_num
    $p    = parse_priority prop.description
    $done = false
    $tmp  = []
    for s in $sorted_num
      if !$done && $p <= (parse_priority s.description)
        $tmp  = $tmp | array.add prop
        $done = true
      end
      $tmp = $tmp | array.add s
    end
    if !$done
      $tmp = $tmp | array.add prop
    end
    $sorted_num = $tmp
  end

  # Sort the rest alphabetically by caption
  $sorted_alpha = $vp_alpha | array.sort "caption"

  # Final list: numbered first, then alpha, Poznamka always last (handled separately)
  $vp = $sorted_num
  for prop in $sorted_alpha
    $vp = $vp | array.add prop
  end

  $n           = $vp | array.size
  $hasPoznamka = $poznamka != null

  # Controls that need ISupportInitialize wrapping
  $initControls = []
  for prop in $vp
    if needs_init prop.control_prefix
      $initControls = $initControls | array.add prop
    end
  end

  # Výpočet výšek: $n datových řádků (27 px) + volitelně EtchedLine (20 px) + Poznamka (54 px)
  $th  = $n * 27 + ($hasPoznamka ? 74 : 0)
  $ph  = $th + 4
  $tph = $ph + 6
  $tbh = $tph + 29
  $ch  = $tbh + 10
  $mh  = $ch + 39
~}}
namespace {{ base_namespace }}.{{ module_name }}UI
{
    partial class {{ object_name }}Form
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof({{ object_name }}Form));
            this.tableLayoutPanel1 = new System.Windows.Forms.TableLayoutPanel();
{{~ for prop in $vp }}
            this.label{{ for.index + 1 }} = new System.Windows.Forms.Label();
            this.{{ prop.control_name }} = new {{ ctrl_class prop.control_prefix }}();
{{~ end }}
{{~ if $hasPoznamka }}
            this.etchedLinePoznamka = new CSW.Controls.EtchedLine();
            this.tbPoznamka = new System.Windows.Forms.TextBox();
{{~ end }}
            this.toolStripContainer1.ContentPanel.SuspendLayout();
            this.toolStripContainer1.SuspendLayout();
            this.panelContent.SuspendLayout();
            this.TabControlExConatiner.SuspendLayout();
            this.tpObecne.SuspendLayout();
            this.tpUzivatelPromenne.SuspendLayout();
            this.tpAttachments.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.S5StyleController)).BeginInit();
            this.tableLayoutPanel1.SuspendLayout();
{{~ for prop in $initControls }}
            ((System.ComponentModel.ISupportInitialize)(this.{{ prop.control_name }})).BeginInit();
{{~ end }}
            this.SuspendLayout();
            //
            // toolStripContainer1
            //
            //
            // toolStripContainer1.ContentPanel
            //
            this.toolStripContainer1.ContentPanel.Size = new System.Drawing.Size(374, {{ $ch }});
            this.toolStripContainer1.Size = new System.Drawing.Size(374, {{ $ch }});
            //
            // panelContent
            //
            this.panelContent.Controls.Add(this.tableLayoutPanel1);
            this.panelContent.Size = new System.Drawing.Size(350, {{ $ph }});
            //
            // TabControlExConatiner
            //
            //
            //
            //
            this.TabControlExConatiner.DisplayStyleProvider.BorderColor = System.Drawing.SystemColors.ControlDark;
            this.TabControlExConatiner.DisplayStyleProvider.BorderColorHot = System.Drawing.SystemColors.ControlDark;
            this.TabControlExConatiner.DisplayStyleProvider.BorderColorSelected = System.Drawing.Color.FromArgb(((int)(((byte)(132)))), ((int)(((byte)(130)))), ((int)(((byte)(132)))));
            this.TabControlExConatiner.DisplayStyleProvider.CloserColor = System.Drawing.Color.DarkGray;
            this.TabControlExConatiner.DisplayStyleProvider.FocusTrack = false;
            this.TabControlExConatiner.DisplayStyleProvider.HotTrack = true;
            this.TabControlExConatiner.DisplayStyleProvider.ImageAlign = System.Drawing.ContentAlignment.MiddleLeft;
            this.TabControlExConatiner.DisplayStyleProvider.Opacity = 1F;
            this.TabControlExConatiner.DisplayStyleProvider.Overlap = 0;
            this.TabControlExConatiner.DisplayStyleProvider.Padding = new System.Drawing.Point(10, 4);
            this.TabControlExConatiner.DisplayStyleProvider.Radius = 2;
            this.TabControlExConatiner.DisplayStyleProvider.ShowTabCloser = false;
            this.TabControlExConatiner.DisplayStyleProvider.TextColor = System.Drawing.SystemColors.ControlText;
            this.TabControlExConatiner.DisplayStyleProvider.TextColorDisabled = System.Drawing.SystemColors.ControlDark;
            this.TabControlExConatiner.DisplayStyleProvider.TextColorSelected = System.Drawing.SystemColors.ControlText;
            this.TabControlExConatiner.Size = new System.Drawing.Size(364, {{ $tbh }});
            //
            // tpObecne
            //
            this.tpObecne.Location = new System.Drawing.Point(4, 25);
            this.tpObecne.Size = new System.Drawing.Size(356, {{ $tph }});
            //
            // tpUzivatelPromenne
            //
            this.tpUzivatelPromenne.Location = new System.Drawing.Point(4, 25);
            this.tpUzivatelPromenne.Size = new System.Drawing.Size(654, 377);
            //
            // tpAttachments
            //
            this.tpAttachments.Location = new System.Drawing.Point(4, 25);
            this.tpAttachments.Size = new System.Drawing.Size(654, 377);
            //
            // imageList
            //
            this.imageList.ImageStream = ((System.Windows.Forms.ImageListStreamer)(resources.GetObject("imageList.ImageStream")));
            this.imageList.Images.SetKeyName(0, "SlozkaZavrena.bmp");
            this.imageList.Images.SetKeyName(1, "SlozkaOtevrena.bmp");
            this.imageList.Images.SetKeyName(2, "ObecnyDoc.bmp");
            //
            // S5StyleController
            //
            this.S5StyleController.LookAndFeel.Style = DevExpress.LookAndFeel.LookAndFeelStyle.Style3D;
            this.S5StyleController.LookAndFeel.UseDefaultLookAndFeel = false;
            this.S5StyleController.LookAndFeel.UseWindowsXPTheme = true;
            //
            // tableLayoutPanel1
            //
            this.tableLayoutPanel1.ColumnCount = 2;
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 120F));
            this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 100F));
{{~ for prop in $vp }}
            this.tableLayoutPanel1.Controls.Add(this.label{{ for.index + 1 }}, 0, {{ for.index }});
            this.tableLayoutPanel1.Controls.Add(this.{{ prop.control_name }}, 1, {{ for.index }});
{{~ end }}
{{~ if $hasPoznamka }}
            this.tableLayoutPanel1.Controls.Add(this.etchedLinePoznamka, 0, {{ $n }});
            this.tableLayoutPanel1.SetColumnSpan(this.etchedLinePoznamka, 2);
            this.tableLayoutPanel1.Controls.Add(this.tbPoznamka, 0, {{ $n + 1 }});
            this.tableLayoutPanel1.SetColumnSpan(this.tbPoznamka, 2);
{{~ end }}
            this.tableLayoutPanel1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.tableLayoutPanel1.Location = new System.Drawing.Point(0, 2);
            this.tableLayoutPanel1.Name = "tableLayoutPanel1";
            this.tableLayoutPanel1.RowCount = {{ $n + ($hasPoznamka ? 3 : 1) }};
{{~ for prop in $vp }}
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle());
{{~ end }}
{{~ if $hasPoznamka }}
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 20F));
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 100F));
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 0F));
{{~ else }}
            this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 100F));
{{~ end }}
            this.tableLayoutPanel1.Size = new System.Drawing.Size(350, {{ $th }});
            this.tableLayoutPanel1.TabIndex = 0;
{{~ for prop in $vp }}
            //
            // label{{ for.index + 1 }}
            //
            this.label{{ for.index + 1 }}.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Left | System.Windows.Forms.AnchorStyles.Right)));
            this.label{{ for.index + 1 }}.AutoSize = true;
            this.label{{ for.index + 1 }}.Location = new System.Drawing.Point(3, {{ for.index * 27 + 7 }});
            this.label{{ for.index + 1 }}.Name = "label{{ for.index + 1 }}";
            this.label{{ for.index + 1 }}.Size = new System.Drawing.Size(114, 13);
            this.label{{ for.index + 1 }}.TabIndex = 0;
            this.label{{ for.index + 1 }}.Text = "{{ prop.caption }}";
            //
            // {{ prop.control_name }}
            //
            this.{{ prop.control_name }}.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Left | System.Windows.Forms.AnchorStyles.Right)));
            this.{{ prop.control_name }}.Location = new System.Drawing.Point(123, {{ for.index * 27 + 3 }});
            this.{{ prop.control_name }}.Name = "{{ prop.control_name }}";
{{~ if prop.control_prefix == "gpbe" }}
            this.{{ prop.control_name }}.AlwaysUseSetInnerListForPrediction = false;
            this.{{ prop.control_name }}.CustomNezarazenoID = new System.Guid("00000000-0000-0000-0000-000000000000");
            this.{{ prop.control_name }}.ShownColumn = null;
            this.{{ prop.control_name }}.ShownColumnDelimiter = null;
{{~ else if prop.control_prefix == "pbe" }}
            this.{{ prop.control_name }}.ObjectName = null;
            this.{{ prop.control_name }}.ShownColumn = null;
            this.{{ prop.control_name }}.ShownColumnDelimiter = null;
            this.{{ prop.control_name }}.ShowTemplates = false;
{{~ end }}
            this.{{ prop.control_name }}.Size = new System.Drawing.Size(224, 21);
            this.{{ prop.control_name }}.TabIndex = {{ for.index * 2 + 1 }};
{{~ end }}
{{~ if $hasPoznamka }}
            //
            // etchedLinePoznamka
            //
            this.etchedLinePoznamka.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Left | System.Windows.Forms.AnchorStyles.Right)));
            this.etchedLinePoznamka.BackColor = System.Drawing.Color.Transparent;
            this.etchedLinePoznamka.Location = new System.Drawing.Point(3, {{ $n * 27 + 3 }});
            this.etchedLinePoznamka.Margin = new System.Windows.Forms.Padding(3, 0, 3, 0);
            this.etchedLinePoznamka.Name = "etchedLinePoznamka";
            this.etchedLinePoznamka.Size = new System.Drawing.Size(344, 16);
            this.etchedLinePoznamka.TabIndex = {{ $n * 2 }};
            this.etchedLinePoznamka.TabStop = false;
            this.etchedLinePoznamka.Text = "{{ $poznamka.caption }}";
            this.etchedLinePoznamka.UnderLine = false;
            //
            // tbPoznamka
            //
            this.tbPoznamka.Dock = System.Windows.Forms.DockStyle.Fill;
            this.tbPoznamka.Location = new System.Drawing.Point(3, {{ $n * 27 + 23 }});
            this.tbPoznamka.Multiline = true;
            this.tbPoznamka.Name = "tbPoznamka";
            this.tbPoznamka.ScrollBars = System.Windows.Forms.ScrollBars.Vertical;
            this.tbPoznamka.Size = new System.Drawing.Size(344, 50);
            this.tbPoznamka.TabIndex = {{ $n * 2 + 1 }};
{{~ end }}
            //
            // {{ object_name }}Form
            //
            this.Appearance.BackColor = System.Drawing.SystemColors.Control;
            this.Appearance.Options.UseBackColor = true;
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(374, {{ $ch }});
            this.S5HelpProvider.SetHelpKeyword(this, "1");
            this.S5HelpProvider.SetHelpNavigator(this, System.Windows.Forms.HelpNavigator.TopicId);
            this.IconOptions.Icon = ((System.Drawing.Icon)(resources.GetObject("{{ object_name }}Form.IconOptions.Icon")));
            this.LookAndFeel.Style = DevExpress.LookAndFeel.LookAndFeelStyle.Style3D;
            this.LookAndFeel.UseDefaultLookAndFeel = false;
            this.LookAndFeel.UseWindowsXPTheme = true;
            this.MinimumSize = new System.Drawing.Size(390, {{ $mh }});
            this.Name = "{{ object_name }}Form";
            this.S5HelpProvider.SetShowHelp(this, true);
            this.Text = "{{ object_caption }}";
            this.toolStripContainer1.ContentPanel.ResumeLayout(false);
            this.toolStripContainer1.ContentPanel.PerformLayout();
            this.toolStripContainer1.ResumeLayout(false);
            this.toolStripContainer1.PerformLayout();
            this.panelContent.ResumeLayout(false);
            this.TabControlExConatiner.ResumeLayout(false);
            this.tpObecne.ResumeLayout(false);
            this.tpUzivatelPromenne.ResumeLayout(false);
            this.tpAttachments.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.S5StyleController)).EndInit();
            this.tableLayoutPanel1.ResumeLayout(false);
            this.tableLayoutPanel1.PerformLayout();
{{~ for prop in $initControls }}
            ((System.ComponentModel.ISupportInitialize)(this.{{ prop.control_name }})).EndInit();
{{~ end }}
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.TableLayoutPanel tableLayoutPanel1;
{{~ for prop in $vp }}
        private System.Windows.Forms.Label label{{ for.index + 1 }};
        private {{ ctrl_class prop.control_prefix }} {{ prop.control_name }};
{{~ end }}
{{~ if $hasPoznamka }}
        private CSW.Controls.EtchedLine etchedLinePoznamka;
        private System.Windows.Forms.TextBox tbPoznamka;
{{~ end }}
    }
}
